(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4769:function(e,t,c){Promise.resolve().then(c.bind(c,8748))},8748:function(e,t,c){"use strict";c.d(t,{default:function(){return i}});var r=c(7437),a=c(2265),n=c(8340),s=c(384);function i(){let[e,t]=(0,a.useState)(4),{toggleCartItem:c,cart:i,loadCartFromLocalStorage:l,products:o,formatNumber:u}=(0,s.j)(),[d,m]=(0,a.useState)([]);return(0,a.useEffect)(()=>{m(o)},[o]),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"card_items",children:d.map(e=>(0,r.jsx)(n.Z,{product:e},e.code))})})}},8340:function(e,t,c){"use strict";c.d(t,{Z:function(){return s}});var r=c(7437);c(2265);var a=c(384),n=c(7648);function s(e){let{product:t}=e,{toggleCartItem:c,cart:s}=(0,a.j)(),i=t&&t.src&&t.src.length>1?t.src[0]:"defaultFilename.jpg",l=()=>{c(t)};return(0,r.jsxs)(n.default,{className:"card_item",href:"/product/".concat(t.code),passHref:!0,scroll:!0,children:["defaultFilename"!==i?(0,r.jsx)("img",{src:"../img/".concat(i),alt:t.name,className:"card_img"}):(0,r.jsx)("div",{children:"Нет изображений"}),(0,r.jsx)("h3",{className:"card_title",children:t.name}),(0,r.jsxs)("p",{className:"card_arct",children:["Артикул:",t.article]}),(0,r.jsxs)("div",{className:"card_bottom",children:[(0,r.jsx)("p",{className:"card_price",children:t.price}),(0,r.jsx)("div",{className:s.some(e=>e.id===t.id)?"addCard active":"addCard",onClick:e=>{e.preventDefault(),e.stopPropagation(),l()}})]})]})}},384:function(e,t,c){"use strict";c.d(t,{CartProvider:function(){return i},j:function(){return s}});var r=c(7437),a=c(2265);let n=(0,a.createContext)(),s=()=>(0,a.useContext)(n),i=e=>{let{children:t}=e,[c,s]=(0,a.useState)([]),[i,l]=(0,a.useState)(0),[o,u]=(0,a.useState)(0),[d,m]=(0,a.useState)([]);(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("/bdlist.json"),t=await e.json();m(t),console.log("Полученные данные:",t)}catch(e){console.log(e)}})()},[]);let f=()=>{let e=localStorage.getItem("cart");e&&(s(JSON.parse(e)),g(JSON.parse(e)))};(0,a.useEffect)(()=>{f()},[]);let p=e=>{g(e),localStorage.setItem("cart",JSON.stringify(e))},g=e=>{let t=0,c=0;e.map(e=>{t+=e.count,c+=e.count*e.price}),l(t),u(c)};return(0,r.jsx)(n.Provider,{value:{cart:c,toggleCartItem:e=>{let t;s(t=c.some(t=>t.code===e.code)?c.filter(t=>t.code!==e.code):[...c,{...e,count:1}]),p(t)},loadCartFromLocalStorage:f,totalQuant:i,totalSum:o,formatNumber:e=>{let t=Number(String(e).replace(/\s+/g,"").slice(0,-2));return isNaN(t)?"":t.toLocaleString("ru-RU")},increment:e=>{let t=c.map(t=>t.id===e.id?{...t,count:++t.count}:t);s(t),p(t)},decrement:e=>{let t=c.map(t=>t.id===e.id&&1!==t.count?{...t,count:--t.count}:t);s(t),p(t)},products:d},children:t})}}},function(e){e.O(0,[648,971,117,744],function(){return e(e.s=4769)}),_N_E=e.O()}]);