(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{2863:function(e,s,a){Promise.resolve().then(a.t.bind(a,2972,23)),Promise.resolve().then(a.t.bind(a,7425,23)),Promise.resolve().then(a.t.bind(a,9608,23)),Promise.resolve().then(a.bind(a,3351)),Promise.resolve().then(a.bind(a,384)),Promise.resolve().then(a.t.bind(a,2778,23))},3351:function(e,s,a){"use strict";var t=a(7437),c=a(7648),r=a(2265),n=a(384);s.default=()=>{let e=(0,r.useRef)(null),{toggleCartItem:s,cart:a,loadCartFromLocalStorage:l,products:i,formatNumber:o}=(0,n.j)(),[d,h]=(0,r.useState)(""),[u,m]=(0,r.useState)([]),[f,x]=(0,r.useState)(!1),[j,N]=(0,r.useState)(!1);function v(){x(!f)}(0,r.useEffect)(()=>{if(j)try{let e=Object.values(i).filter(e=>e.name&&e.name.toLowerCase().includes(d.toLowerCase()));m(e)}catch(e){console.error("Ошибка при фильтрации продуктов:",e)}},[d]);let g=()=>{N(!0),e.current&&e.current.focus()},p=()=>{window.innerHeight>500&&(N(!1),e.current&&e.current.blur())};return(0,r.useEffect)(()=>(window.addEventListener("resize",p),p(),()=>{window.removeEventListener("resize",p)}),[]),(0,t.jsxs)("header",{children:[(0,t.jsx)("div",{className:"container",children:(0,t.jsxs)("nav",{className:j?"active":"",children:[(0,t.jsx)("div",{className:"logo",children:(0,t.jsx)("img",{src:"/Logo.svg",alt:"logo"})}),(0,t.jsx)("div",{className:f?"header_container active":"header_container",children:(0,t.jsxs)("ul",{className:"header_items",children:[(0,t.jsx)("li",{className:"header_item",children:(0,t.jsx)(c.default,{href:"/",className:"header_links",onClick:v,children:"Главная"})}),(0,t.jsx)("li",{className:"header_item",children:(0,t.jsx)(c.default,{href:"/catalog",className:"header_links",onClick:v,children:"Каталог"})}),(0,t.jsx)("li",{className:"header_item",children:(0,t.jsx)(c.default,{href:"/delivery",className:"header_links",onClick:v,children:"Доставка"})}),(0,t.jsx)("li",{className:"header_item none",children:(0,t.jsx)("a",{className:"number",href:"tel: +7953553053",children:"+ 7 9(535)-530-53"})}),(0,t.jsx)(c.default,{href:"/basket",className:"header_item ",children:(0,t.jsx)("div",{className:"basket",onClick:v,children:(0,t.jsx)("span",{className:"basket_count",children:a.length})})})]})}),(0,t.jsxs)("div",{className:"header_functional",children:[(0,t.jsxs)("div",{className:"header_search",children:[(0,t.jsx)("input",{className:j?"search active":"search",placeholder:"Поиск",type:"text",ref:e,value:d,onFocus:g,onChange:e=>h(e.target.value)}),(0,t.jsx)("img",{onTouchStart:e=>{e.preventDefault(),setTimeout(g,0)},className:"search_img",src:"/icons/search.svg",alt:""})]}),(0,t.jsx)("a",{className:"number",href:"tel: +7953553053",children:"+ 7 9(535)-530-53"}),(0,t.jsx)(c.default,{href:"/basket",className:"basket",onClick:v,children:(0,t.jsx)("span",{className:"basket_count",children:a.length})})]}),(0,t.jsx)("div",{className:"menu back menu--3",onChange:v,onBlur:()=>{setTimeout(()=>{N(!1)},200)},children:(0,t.jsxs)("label",{className:"burger",children:[(0,t.jsx)("input",{type:"checkbox",defaultChecked:f,checked:f}),(0,t.jsxs)("svg",{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("circle",{cx:"50",cy:"50",r:"30"}),(0,t.jsx)("path",{className:"line--1",d:"M0 40h62c18 0 18-20-17 5L31 55"}),(0,t.jsx)("path",{className:"line--2",d:"M0 50h80"}),(0,t.jsx)("path",{className:"line--3",d:"M0 60h62c18 0 18 20-17-5L31 45"})]})]})})]})}),(0,t.jsx)("div",{className:j&&u.length>0?"search_items active":"search_items",children:j&&u.map(e=>(0,t.jsxs)(c.default,{className:"search_item",href:"/product/".concat(e.code),onClick:v,children:[(0,t.jsx)("img",{src:"../img/".concat(e.images.rows[0].filename),alt:e.name,className:"search_picture"}),(0,t.jsxs)("div",{className:"search_block_text",children:[(0,t.jsx)("h4",{className:"search_title",children:e.name}),(0,t.jsx)("span",{className:"search_price",children:o(e.salePrices[0].value)})]}),(0,t.jsx)("img",{src:"/icons/free-icon-remove-from-cart-4379564 1.svg",alt:"",className:"search_addBasket",onClick:a=>{a.preventDefault(),a.stopPropagation(),s(e)}})]},e.id))})]})}},384:function(e,s,a){"use strict";a.d(s,{CartProvider:function(){return l},j:function(){return n}});var t=a(7437),c=a(2265);let r=(0,c.createContext)(),n=()=>(0,c.useContext)(r),l=e=>{let{children:s}=e,[a,n]=(0,c.useState)([]),[l,i]=(0,c.useState)(0),[o,d]=(0,c.useState)(0),[h,u]=(0,c.useState)([]);async function m(){try{let e=await fetch("/api/products",{headers:{Authorization:"Bearer 04c229acda627c250062de4c2a82b1bc3c9293d5","Accept-Encoding":"gzip"}});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let s=await e.json();console.log("вывод"+s+"вывод"),u(s.rows),console.log("вроде успех"+h)}catch(e){console.log("Ошибка получение в контекст"+e)}}let f=()=>{let e=localStorage.getItem("cart");e&&(n(JSON.parse(e)),j(JSON.parse(e)))};(0,c.useEffect)(()=>{f(),m()},[]);let x=e=>{j(e),localStorage.setItem("cart",JSON.stringify(e))},j=e=>{let s=0,a=0;e.map(e=>{s+=e.count,a+=e.count*e.salePrices[0].value}),i(s),d(a)};return(0,t.jsx)(r.Provider,{value:{cart:a,toggleCartItem:e=>{let s;n(s=a.some(s=>s.code===e.code)?a.filter(s=>s.code!==e.code):[...a,{...e,count:1}]),x(s)},loadCartFromLocalStorage:f,totalQuant:l,totalSum:o,formatNumber:e=>{let s=Number(String(e).replace(/\s+/g,"").slice(0,-2));return isNaN(s)?"":s.toLocaleString("ru-RU")},increment:e=>{let s=a.map(s=>s.id===e.id?{...s,count:++s.count}:s);n(s),x(s)},decrement:e=>{let s=a.map(s=>s.id===e.id&&1!==s.count?{...s,count:--s.count}:s);n(s),x(s)},products:h},children:s})}},9608:function(){},7425:function(){},2778:function(){}},function(e){e.O(0,[329,461,648,971,117,744],function(){return e(e.s=2863)}),_N_E=e.O()}]);