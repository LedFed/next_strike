(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[43],{8893:function(e,t,r){Promise.resolve().then(r.bind(r,1954))},1438:function(e,t,r){"use strict";var a=r(2265),c=function(){return(c=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var c in t=arguments[r])Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c]);return e}).apply(this,arguments)},i=function(e){var t=e.animate,r=e.backgroundColor,i=void 0===r?"#f5f6f7":r,n=e.backgroundOpacity,o=void 0===n?1:n,s=e.baseUrl,l=void 0===s?"":s,d=e.children,u=e.foregroundColor,h=e.foregroundOpacity,m=e.gradientRatio,p=void 0===m?2:m,f=e.uniqueKey,g=e.rtl,x=e.speed,v=e.style,y=e.title,j=void 0===y?"Loading...":y,b=e.beforeMask,w=void 0===b?null:b,N=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var c=0,a=Object.getOwnPropertySymbols(e);c<a.length;c++)0>t.indexOf(a[c])&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(r[a[c]]=e[a[c]]);return r}(e,["animate","backgroundColor","backgroundOpacity","baseUrl","children","foregroundColor","foregroundOpacity","gradientRatio","uniqueKey","rtl","speed","style","title","beforeMask"]),E=f||Math.random().toString(36).substring(6),O="".concat(E,"-diff"),_="".concat(E,"-animated-diff"),C="".concat(E,"-aria"),k="".concat(-1*p," 0");return(0,a.createElement)("svg",c({"aria-labelledby":C,role:"img",style:c(c({},void 0===v?{}:v),void 0!==g&&g?{transform:"scaleX(-1)"}:null)},N),j?(0,a.createElement)("title",{id:C},j):null,w&&(0,a.isValidElement)(w)?w:null,(0,a.createElement)("rect",{role:"presentation",x:"0",y:"0",width:"100%",height:"100%",clipPath:"url(".concat(l,"#").concat(O,")"),style:{fill:"url(".concat(l,"#").concat(_,")")}}),(0,a.createElement)("defs",null,(0,a.createElement)("clipPath",{id:O},d),(0,a.createElement)("linearGradient",{id:_,gradientTransform:"translate(".concat(k,")")},(0,a.createElement)("stop",{offset:"0%",stopColor:i,stopOpacity:o}),(0,a.createElement)("stop",{offset:"50%",stopColor:void 0===u?"#eee":u,stopOpacity:void 0===h?1:h}),(0,a.createElement)("stop",{offset:"100%",stopColor:i,stopOpacity:o}),(void 0===t||t)&&(0,a.createElement)("animateTransform",{attributeName:"gradientTransform",type:"translate",values:"".concat(k,"; 0 0; ").concat("".concat(p," 0")),dur:"".concat(void 0===x?1.2:x,"s"),repeatCount:"indefinite"}))))},n=function(e){return e.children?(0,a.createElement)(i,c({},e)):(0,a.createElement)(o,c({},e))},o=function(e){return(0,a.createElement)(n,c({viewBox:"0 0 476 124"},e),(0,a.createElement)("rect",{x:"48",y:"8",width:"88",height:"6",rx:"3"}),(0,a.createElement)("rect",{x:"48",y:"26",width:"52",height:"6",rx:"3"}),(0,a.createElement)("rect",{x:"0",y:"56",width:"410",height:"6",rx:"3"}),(0,a.createElement)("rect",{x:"0",y:"72",width:"380",height:"6",rx:"3"}),(0,a.createElement)("rect",{x:"0",y:"88",width:"178",height:"6",rx:"3"}),(0,a.createElement)("circle",{cx:"20",cy:"20",r:"20"}))};t.ZP=n},1954:function(e,t,r){"use strict";r.r(t);var a=r(7437),c=r(384),i=r(2265),n=r(8340),o=r(385),s=r(5532);t.default=()=>{let{toggleCartItem:e}=(0,c.j)(),[t,r]=(0,i.useState)([]),[l,d]=(0,i.useState)(16),[u,h]=(0,i.useState)(!0),m=async()=>{try{let e=await fetch("/api/products");return(await e.json()).rows}catch(e){console.log(e)}};(0,i.useEffect)(()=>{(async()=>{r(await m()),h(!1)})()},[]);let p=e=>{let a=[...t];switch(e){case"priceAsc":a.sort((e,t)=>t.salePrices[0].value-e.salePrices[0].value);break;case"priceDesc":a.sort((e,t)=>e.salePrices[0].value-t.salePrices[0].value)}console.log(a+"Поменяли"),r(a)};return t?(0,a.jsxs)("div",{className:"container",children:[(0,a.jsx)(o.Z,{items:[{title:"Главная",link:"/"},{title:"Каталог",link:"/catalog"}]}),(0,a.jsx)("div",{className:"catalog",children:(0,a.jsxs)("div",{className:"catalog_cards",children:[(0,a.jsx)("div",{className:"catalog_sort_right",children:(0,a.jsxs)("select",{className:"catalog_sort",onChange:e=>p(e.target.value),children:[(0,a.jsx)("option",{className:"catalog_sort_option",value:"popularity",children:"Сначала популярные"}),(0,a.jsx)("option",{className:"catalog_sort_option",value:"priceDesc",children:"Сначала дешевле"}),(0,a.jsx)("option",{className:"catalog_sort_option",value:"priceAsc",children:"Сначала дороже"})]})}),(0,a.jsx)("div",{className:"card_items",children:u?Array.from({length:6}).map((e,t)=>(0,a.jsx)(s.Z,{},t)):t.slice(0,l).map(e=>(0,a.jsx)(n.Z,{product:e},e.id))}),l<t.length&&(0,a.jsx)("div",{className:"btn",onClick:()=>{d(e=>e+8)},children:"Показать еще"})]})})]}):(0,a.jsx)("div",{children:"Загрузка..."})}},385:function(e,t,r){"use strict";var a=r(7437),c=r(7648);t.Z=e=>{let{items:t}=e;return(0,a.jsxs)("nav",{"aria-label":"Breadcrumb",children:[(0,a.jsx)("div",{}),(0,a.jsx)("ol",{className:"breadcrumb",children:t.map((e,t)=>(0,a.jsx)("li",{className:"breadcrumb_text",children:e.link?(0,a.jsx)(c.default,{href:e.link,children:e.title}):(0,a.jsx)("span",{"aria-current":"page",children:e.title})},t))})]})}},8340:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var a=r(7437);r(2265);var c=r(384),i=r(7648);function n(e){let{product:t}=e,{toggleCartItem:r,formatNumber:n,cart:o}=(0,c.j)(),s=t&&t.images&&t.images.rows&&t.images.rows.length>1?t.images.rows[0].filename:"defaultFilename",l=()=>{r(t)};return(0,a.jsxs)(i.default,{className:"card_item",href:"/product/".concat(t.code),passHref:!0,scroll:!0,children:[(0,a.jsx)("img",{src:"../img/".concat(s),alt:t.name,className:"card_img"}),(0,a.jsx)("h3",{className:"card_title",children:t.name}),(0,a.jsxs)("p",{className:"card_arct",children:["Артикул:",t.article]}),(0,a.jsxs)("div",{className:"card_bottom",children:[(0,a.jsx)("p",{className:"card_price",children:n(t.salePrices[0].value)}),(0,a.jsx)("div",{className:o.some(e=>e.id===t.id)?"addCard active":"addCard",onClick:e=>{e.preventDefault(),e.stopPropagation(),l()}})]})]})}},384:function(e,t,r){"use strict";r.d(t,{CartProvider:function(){return o},j:function(){return n}});var a=r(7437),c=r(2265);let i=(0,c.createContext)(),n=()=>(0,c.useContext)(i),o=e=>{let{children:t}=e,[r,n]=(0,c.useState)([]),[o,s]=(0,c.useState)(0),[l,d]=(0,c.useState)(0),[u,h]=(0,c.useState)([]);async function m(){try{let e=await fetch("/api/products",{headers:{Authorization:"Bearer 04c229acda627c250062de4c2a82b1bc3c9293d5","Accept-Encoding":"gzip"}});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let t=await e.json();console.log("вывод"+t+"вывод"),h(t.rows),console.log("вроде успех"+u)}catch(e){console.log("Ошибка получение в контекст"+e)}}let p=()=>{let e=localStorage.getItem("cart");e&&(n(JSON.parse(e)),g(JSON.parse(e)))};(0,c.useEffect)(()=>{p(),m()},[]);let f=e=>{g(e),localStorage.setItem("cart",JSON.stringify(e))},g=e=>{let t=0,r=0;e.map(e=>{t+=e.count,r+=e.count*e.salePrices[0].value}),s(t),d(r)};return(0,a.jsx)(i.Provider,{value:{cart:r,toggleCartItem:e=>{let t;n(t=r.some(t=>t.code===e.code)?r.filter(t=>t.code!==e.code):[...r,{...e,count:1}]),f(t)},loadCartFromLocalStorage:p,totalQuant:o,totalSum:l,formatNumber:e=>{let t=Number(String(e).replace(/\s+/g,"").slice(0,-2));return isNaN(t)?"":t.toLocaleString("ru-RU")},increment:e=>{let t=r.map(t=>t.id===e.id?{...t,count:++t.count}:t);n(t),f(t)},decrement:e=>{let t=r.map(t=>t.id===e.id&&1!==t.count?{...t,count:--t.count}:t);n(t),f(t)},products:u},children:t})}},5532:function(e,t,r){"use strict";var a=r(7437);r(2265);var c=r(1438);t.Z=e=>(0,a.jsxs)(c.ZP,{speed:2,width:"100%",height:"100%",viewBox:"0 0 317 430",backgroundColor:"#ededed",foregroundColor:"#dedede",...e,children:[(0,a.jsx)("rect",{x:"25",y:"382",rx:"8",ry:"8",width:"122",height:"10"}),(0,a.jsx)("rect",{x:"25",y:"316",rx:"9",ry:"9",width:"224",height:"18"}),(0,a.jsx)("rect",{x:"26",y:"357",rx:"5",ry:"5",width:"87",height:"9"}),(0,a.jsx)("rect",{x:"310",y:"304",rx:"0",ry:"0",width:"11",height:"0"}),(0,a.jsx)("rect",{x:"144",y:"294",rx:"0",ry:"0",width:"1",height:"0"}),(0,a.jsx)("rect",{x:"24",y:"32",rx:"5",ry:"5",width:"264",height:"265"})]})}},function(e){e.O(0,[648,971,117,744],function(){return e(e.s=8893)}),_N_E=e.O()}]);